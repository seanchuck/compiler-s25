Successfully built symbol table!
=================SYMBOL TABLE====================
SymProgram {
  span: Span { sline: 1, scol: 8, eline: 40, ecol: 2 },
  **SCOPE** {
    id: Some("Global scope"),
    parent: "None",

    table: {
      "main": Method { return_type: Void, params: [], span: Span { sline: 23, scol: 1, eline: 40, ecol: 2 } },
      "get_int": Method { return_type: Int, params: [(Int, "num")], span: Span { sline: 3, scol: 1, eline: 6, ecol: 2 } },
      "printf": Import { return_type: int,span: Span { sline: 1, scol: 8, eline: 1, ecol: 14 } },
      "get_long": Method { return_type: Long, params: [(Long, "num")], span: Span { sline: 18, scol: 1, eline: 21, ecol: 2 } },
      "get_bool": Method { return_type: Bool, params: [(Bool, "bool_in"), (Int, "num_2")], span: Span { sline: 7, scol: 1, eline: 16, ecol: 2 } },
    }
  }

  methods: {

    "get_int":
      SymMethod {
        name: "get_int",
        return_type: Int,
        params: [(Int, "num", Span { sline: 3, scol: 17, eline: 3, ecol: 20 })],
        span: Span { sline: 3, scol: 1, eline: 6, ecol: 2 },

        scope:
          **SCOPE** {
            id: Some("Child of: Global scope"),
            parent: "Global scope",

            table: {
              "num": Variable { typ: Int, span: Span { sline: 3, scol: 17, eline: 3, ecol: 20 } },
            }
          }

        body:
          SymBlock {
            span: Span { sline: 3, scol: 22, eline: 6, ecol: 2 },

            scope:
              **SCOPE** {
                id: Some("Child of: Global scope"),
                parent: "Global scope",

                table: {
                  "num": Variable { typ: Int, span: Span { sline: 3, scol: 17, eline: 3, ecol: 20 } },
                }
              }

            statements: [
              MethodCall { method_name: "printf", args: [Literal { value: String("%d\\n"), span: Span { sline: 4, scol: 12, eline: 4, ecol: 18 } }, Identifier { entry: Variable { name: "num", typ: Int, length: None, span: Span { sline: 3, scol: 17, eline: 3, ecol: 20 } }, span: Span { sline: 4, scol: 20, eline: 4, ecol: 23 } }], span: Span { sline: 4, scol: 5, eline: 4, ecol: 24 } },
              Return { expr: Some(Identifier { entry: Variable { name: "num", typ: Int, length: None, span: Span { sline: 3, scol: 17, eline: 3, ecol: 20 } }, span: Span { sline: 5, scol: 12, eline: 5, ecol: 15 } }), span: Span { sline: 5, scol: 5, eline: 5, ecol: 15 } },
            ]
          }
      }

    "get_bool":
      SymMethod {
        name: "get_bool",
        return_type: Bool,
        params: [(Bool, "bool_in", Span { sline: 7, scol: 20, eline: 7, ecol: 27 }), (Int, "num_2", Span { sline: 7, scol: 33, eline: 7, ecol: 38 })],
        span: Span { sline: 7, scol: 1, eline: 16, ecol: 2 },

        scope:
          **SCOPE** {
            id: Some("Child of: Global scope"),
            parent: "Global scope",

            table: {
              "bool_in": Variable { typ: Bool, span: Span { sline: 7, scol: 20, eline: 7, ecol: 27 } },
              "num_2": Variable { typ: Int, span: Span { sline: 7, scol: 33, eline: 7, ecol: 38 } },
              "num": Variable { typ: Int, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } },
            }
          }

        body:
          SymBlock {
            span: Span { sline: 7, scol: 40, eline: 16, ecol: 2 },

            scope:
              **SCOPE** {
                id: Some("Child of: Global scope"),
                parent: "Global scope",

                table: {
                  "bool_in": Variable { typ: Bool, span: Span { sline: 7, scol: 20, eline: 7, ecol: 27 } },
                  "num_2": Variable { typ: Int, span: Span { sline: 7, scol: 33, eline: 7, ecol: 38 } },
                  "num": Variable { typ: Int, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } },
                }
              }

            statements: [
              VarDecl { name: "num", typ: Int, length: None, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } },
              If { condition: Identifier { entry: Variable { name: "bool_in", typ: Bool, length: None, span: Span { sline: 7, scol: 20, eline: 7, ecol: 27 } }, span: Span { sline: 9, scol: 9, eline: 9, ecol: 16 } }, then_block: SymBlock { scope: RefCell { value: Scope { parent: Some(RefCell { value: Scope { parent: Some(RefCell { value: Scope { parent: None, table: {"main": Method { name: "main", return_type: Void, params: [], span: Span { sline: 23, scol: 1, eline: 40, ecol: 2 } }, "get_int": Method { name: "get_int", return_type: Int, params: [(Int, "num")], span: Span { sline: 3, scol: 1, eline: 6, ecol: 2 } }, "printf": Import { name: "printf", span: Span { sline: 1, scol: 8, eline: 1, ecol: 14 } }, "get_long": Method { name: "get_long", return_type: Long, params: [(Long, "num")], span: Span { sline: 18, scol: 1, eline: 21, ecol: 2 } }, "get_bool": Method { name: "get_bool", return_type: Bool, params: [(Bool, "bool_in"), (Int, "num_2")], span: Span { sline: 7, scol: 1, eline: 16, ecol: 2 } }}, id: Some("Global scope"), enclosing_block: None } }), table: {"bool_in": Variable { name: "bool_in", typ: Bool, length: None, span: Span { sline: 7, scol: 20, eline: 7, ecol: 27 } }, "num_2": Variable { name: "num_2", typ: Int, length: None, span: Span { sline: 7, scol: 33, eline: 7, ecol: 38 } }, "num": Variable { name: "num", typ: Int, length: None, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } }}, id: Some("Child of: Global scope"), enclosing_block: Some(Method) } }), table: {}, id: Some("Child of: Child of: Global scope"), enclosing_block: Some(Method) } }, statements: [Assignment { target: Identifier { entry: Variable { name: "num", typ: Int, length: None, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } }, span: Span { sline: 10, scol: 9, eline: 10, ecol: 12 } }, expr: Literal { value: Int("1"), span: Span { sline: 10, scol: 15, eline: 10, ecol: 16 } }, span: Span { sline: 10, scol: 9, eline: 10, ecol: 16 }, op: Assign }], span: Span { sline: 9, scol: 18, eline: 11, ecol: 6 } }, else_block: Some(SymBlock { scope: RefCell { value: Scope { parent: Some(RefCell { value: Scope { parent: Some(RefCell { value: Scope { parent: None, table: {"main": Method { name: "main", return_type: Void, params: [], span: Span { sline: 23, scol: 1, eline: 40, ecol: 2 } }, "get_int": Method { name: "get_int", return_type: Int, params: [(Int, "num")], span: Span { sline: 3, scol: 1, eline: 6, ecol: 2 } }, "printf": Import { name: "printf", span: Span { sline: 1, scol: 8, eline: 1, ecol: 14 } }, "get_long": Method { name: "get_long", return_type: Long, params: [(Long, "num")], span: Span { sline: 18, scol: 1, eline: 21, ecol: 2 } }, "get_bool": Method { name: "get_bool", return_type: Bool, params: [(Bool, "bool_in"), (Int, "num_2")], span: Span { sline: 7, scol: 1, eline: 16, ecol: 2 } }}, id: Some("Global scope"), enclosing_block: None } }), table: {"bool_in": Variable { name: "bool_in", typ: Bool, length: None, span: Span { sline: 7, scol: 20, eline: 7, ecol: 27 } }, "num_2": Variable { name: "num_2", typ: Int, length: None, span: Span { sline: 7, scol: 33, eline: 7, ecol: 38 } }, "num": Variable { name: "num", typ: Int, length: None, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } }}, id: Some("Child of: Global scope"), enclosing_block: Some(Method) } }), table: {}, id: Some("Child of: Child of: Global scope"), enclosing_block: Some(Method) } }, statements: [Assignment { target: Identifier { entry: Variable { name: "num", typ: Int, length: None, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } }, span: Span { sline: 12, scol: 9, eline: 12, ecol: 12 } }, expr: Literal { value: Int("2"), span: Span { sline: 12, scol: 15, eline: 12, ecol: 16 } }, span: Span { sline: 12, scol: 9, eline: 12, ecol: 16 }, op: Assign }], span: Span { sline: 11, scol: 12, eline: 13, ecol: 6 } }), span: Span { sline: 9, scol: 5, eline: 13, ecol: 6 } },
              MethodCall { method_name: "printf", args: [Literal { value: String("%d\\n"), span: Span { sline: 14, scol: 12, eline: 14, ecol: 18 } }, Identifier { entry: Variable { name: "num", typ: Int, length: None, span: Span { sline: 8, scol: 9, eline: 8, ecol: 12 } }, span: Span { sline: 14, scol: 20, eline: 14, ecol: 23 } }], span: Span { sline: 14, scol: 5, eline: 14, ecol: 24 } },
              Return { expr: Some(Identifier { entry: Variable { name: "bool_in", typ: Bool, length: None, span: Span { sline: 7, scol: 20, eline: 7, ecol: 27 } }, span: Span { sline: 15, scol: 12, eline: 15, ecol: 19 } }), span: Span { sline: 15, scol: 5, eline: 15, ecol: 19 } },
            ]
          }
      }

    "get_long":
      SymMethod {
        name: "get_long",
        return_type: Long,
        params: [(Long, "num", Span { sline: 18, scol: 20, eline: 18, ecol: 23 })],
        span: Span { sline: 18, scol: 1, eline: 21, ecol: 2 },

        scope:
          **SCOPE** {
            id: Some("Child of: Global scope"),
            parent: "Global scope",

            table: {
              "num": Variable { typ: Long, span: Span { sline: 18, scol: 20, eline: 18, ecol: 23 } },
            }
          }

        body:
          SymBlock {
            span: Span { sline: 18, scol: 25, eline: 21, ecol: 2 },

            scope:
              **SCOPE** {
                id: Some("Child of: Global scope"),
                parent: "Global scope",

                table: {
                  "num": Variable { typ: Long, span: Span { sline: 18, scol: 20, eline: 18, ecol: 23 } },
                }
              }

            statements: [
              MethodCall { method_name: "printf", args: [Literal { value: String("%ld\\n"), span: Span { sline: 19, scol: 12, eline: 19, ecol: 19 } }, Identifier { entry: Variable { name: "num", typ: Long, length: None, span: Span { sline: 18, scol: 20, eline: 18, ecol: 23 } }, span: Span { sline: 19, scol: 21, eline: 19, ecol: 24 } }], span: Span { sline: 19, scol: 5, eline: 19, ecol: 25 } },
              Return { expr: Some(Identifier { entry: Variable { name: "num", typ: Long, length: None, span: Span { sline: 18, scol: 20, eline: 18, ecol: 23 } }, span: Span { sline: 20, scol: 12, eline: 20, ecol: 15 } }), span: Span { sline: 20, scol: 5, eline: 20, ecol: 15 } },
            ]
          }
      }

    "main":
      SymMethod {
        name: "main",
        return_type: Void,
        params: [],
        span: Span { sline: 23, scol: 1, eline: 40, ecol: 2 },

        scope:
          **SCOPE** {
            id: Some("Child of: Global scope"),
            parent: "Global scope",

            table: {
              "a": Variable { typ: Int, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } },
              "c": Variable { typ: Int, span: Span { sline: 26, scol: 9, eline: 26, ecol: 10 } },
              "b": Variable { typ: Int, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } },
            }
          }

        body:
          SymBlock {
            span: Span { sline: 23, scol: 14, eline: 40, ecol: 2 },

            scope:
              **SCOPE** {
                id: Some("Child of: Global scope"),
                parent: "Global scope",

                table: {
                  "a": Variable { typ: Int, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } },
                  "c": Variable { typ: Int, span: Span { sline: 26, scol: 9, eline: 26, ecol: 10 } },
                  "b": Variable { typ: Int, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } },
                }
              }

            statements: [
              VarDecl { name: "a", typ: Int, length: None, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } },
              VarDecl { name: "b", typ: Int, length: None, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } },
              VarDecl { name: "c", typ: Int, length: None, span: Span { sline: 26, scol: 9, eline: 26, ecol: 10 } },
              Assignment { target: Identifier { entry: Variable { name: "a", typ: Int, length: None, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } }, span: Span { sline: 29, scol: 5, eline: 29, ecol: 6 } }, expr: MethodCall { method_name: "get_int", args: [Literal { value: Int("2147483647"), span: Span { sline: 29, scol: 17, eline: 29, ecol: 27 } }], span: Span { sline: 29, scol: 9, eline: 29, ecol: 28 } }, span: Span { sline: 29, scol: 5, eline: 29, ecol: 28 }, op: Assign },
              Assignment { target: Identifier { entry: Variable { name: "b", typ: Int, length: None, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } }, span: Span { sline: 31, scol: 5, eline: 31, ecol: 6 } }, expr: Cast { target_type: Int, expr: BinaryExpr { op: Add, left: Cast { target_type: Long, expr: MethodCall { method_name: "get_int", args: [Identifier { entry: Variable { name: "a", typ: Int, length: None, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } }, span: Span { sline: 31, scol: 26, eline: 31, ecol: 27 } }], span: Span { sline: 31, scol: 17, eline: 31, ecol: 29 } }, span: Span { sline: 31, scol: 13, eline: 31, ecol: 29 } }, right: MethodCall { method_name: "get_long", args: [Literal { value: Long("-4294967295"), span: Span { sline: 31, scol: 42, eline: 31, ecol: 53 } }], span: Span { sline: 31, scol: 32, eline: 31, ecol: 54 } }, span: Span { sline: 31, scol: 12, eline: 31, ecol: 55 } }, span: Span { sline: 31, scol: 9, eline: 31, ecol: 55 } }, span: Span { sline: 31, scol: 5, eline: 31, ecol: 55 }, op: Assign },
              Assignment { target: Identifier { entry: Variable { name: "c", typ: Int, length: None, span: Span { sline: 26, scol: 9, eline: 26, ecol: 10 } }, span: Span { sline: 33, scol: 5, eline: 33, ecol: 6 } }, expr: MethodCall { method_name: "get_int", args: [Identifier { entry: Variable { name: "b", typ: Int, length: None, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } }, span: Span { sline: 33, scol: 17, eline: 33, ecol: 18 } }], span: Span { sline: 33, scol: 9, eline: 33, ecol: 19 } }, span: Span { sline: 33, scol: 5, eline: 33, ecol: 19 }, op: Assign },
              Assignment { target: Identifier { entry: Variable { name: "a", typ: Int, length: None, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } }, span: Span { sline: 36, scol: 5, eline: 36, ecol: 6 } }, expr: MethodCall { method_name: "get_int", args: [Literal { value: Int("-2147483648"), span: Span { sline: 36, scol: 18, eline: 36, ecol: 28 } }], span: Span { sline: 36, scol: 9, eline: 36, ecol: 29 } }, span: Span { sline: 36, scol: 5, eline: 36, ecol: 29 }, op: Assign },
              Assignment { target: Identifier { entry: Variable { name: "b", typ: Int, length: None, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } }, span: Span { sline: 37, scol: 5, eline: 37, ecol: 6 } }, expr: Cast { target_type: Int, expr: BinaryExpr { op: Add, left: Cast { target_type: Long, expr: MethodCall { method_name: "get_int", args: [Identifier { entry: Variable { name: "a", typ: Int, length: None, span: Span { sline: 24, scol: 9, eline: 24, ecol: 10 } }, span: Span { sline: 37, scol: 26, eline: 37, ecol: 27 } }], span: Span { sline: 37, scol: 17, eline: 37, ecol: 29 } }, span: Span { sline: 37, scol: 13, eline: 37, ecol: 29 } }, right: MethodCall { method_name: "get_long", args: [Literal { value: Long("4294967295"), span: Span { sline: 37, scol: 41, eline: 37, ecol: 52 } }], span: Span { sline: 37, scol: 32, eline: 37, ecol: 53 } }, span: Span { sline: 37, scol: 12, eline: 37, ecol: 54 } }, span: Span { sline: 37, scol: 9, eline: 37, ecol: 54 } }, span: Span { sline: 37, scol: 5, eline: 37, ecol: 54 }, op: Assign },
              Assignment { target: Identifier { entry: Variable { name: "c", typ: Int, length: None, span: Span { sline: 26, scol: 9, eline: 26, ecol: 10 } }, span: Span { sline: 39, scol: 5, eline: 39, ecol: 6 } }, expr: MethodCall { method_name: "get_int", args: [Identifier { entry: Variable { name: "b", typ: Int, length: None, span: Span { sline: 25, scol: 9, eline: 25, ecol: 10 } }, span: Span { sline: 39, scol: 17, eline: 39, ecol: 18 } }], span: Span { sline: 39, scol: 9, eline: 39, ecol: 19 } }, span: Span { sline: 39, scol: 5, eline: 39, ecol: 19 }, op: Assign },
            ]
          }
      }
  }
}
============= Optimizing dataflow =============
Dce
Cp
Cse
CP: Replacing a with _t1
CP: Replacing b with _t2
CP: Replacing a with _t10
CP: Replacing b with _t11
Copy propagation changed main
liveness is {
    0: {},
}
liveness is {
    3: {},
    2: {
        "num",
        "_t4",
        "_t0",
    },
    0: {
        "_t3",
        "_t0",
        "_t4",
        "_t2",
    },
    1: {
        "_t4",
        "_t0",
        "num",
    },
}
DCE: Removed dead instruction: Assign { typ: Int, src: Argument(1, Int), dest: LocalVar("_t1", Int) }
Dead code elimination changed get_bool
liveness is {
    0: {},
}
DCE: Removed dead instruction: Assign { typ: Int, src: LocalVar("_t17", Int), dest: LocalVar("c", Int) }
DCE: Removed dead instruction: Assign { typ: Int, src: LocalVar("_t11", Int), dest: LocalVar("b", Int) }
DCE: Removed dead instruction: Assign { typ: Int, src: LocalVar("_t10", Int), dest: LocalVar("a", Int) }
DCE: Removed dead instruction: Assign { typ: Int, src: LocalVar("_t8", Int), dest: LocalVar("c", Int) }
DCE: Removed dead instruction: Assign { typ: Int, src: LocalVar("_t2", Int), dest: LocalVar("b", Int) }
DCE: Removed dead instruction: Assign { typ: Int, src: LocalVar("_t1", Int), dest: LocalVar("a", Int) }
Dead code elimination changed main
liveness is {
    0: {},
}
liveness is {
    0: {},
}
liveness is {
    0: {
        "_t0",
        "_t3",
        "_t4",
        "_t2",
    },
    1: {
        "_t4",
        "_t0",
        "num",
    },
    3: {},
    2: {
        "_t4",
        "_t0",
        "num",
    },
}
liveness is {
    0: {},
}
liveness is {
    0: {},
}

==================== CFG =======================

get_int (stack size: 12 bytes):
    0:
        _t0(Int) <- arg0
        _t1 <- str0
        printf(_t1, _t0)
        ret Int _t0

get_bool (stack size: 28 bytes):
    0:
        _t0(Bool) <- arg0
        cjmp _t0, get_bool1
        ujmp get_bool2
    1:
        Int _t2 <- 1
        num(Int) <- _t2
        ujmp get_bool3
    2:
        Int _t3 <- 2
        num(Int) <- _t3
        ujmp get_bool3
    3:
        _t4 <- str1
        printf(_t4, num)
        ret Bool _t0

main (stack size: 120 bytes):
    0:
        Int _t0 <- 2147483647
        Int_t1 <- get_int(_t0)
        Int_t4 <- get_int(_t1)
        _t3 <- Long(_t4)
        Long _t5 <- -4294967295
        Long_t6 <- get_long(_t5)
        _t7(Long) <- _t3 + _t6
        _t2 <- Int(_t7)
        Int_t8 <- get_int(_t2)
        Int _t9 <- -2147483648
        Int_t10 <- get_int(_t9)
        Int_t13 <- get_int(_t10)
        _t12 <- Long(_t13)
        Long _t14 <- 4294967295
        Long_t15 <- get_long(_t14)
        _t16(Long) <- _t12 + _t15
        _t11 <- Int(_t16)
        Int_t17 <- get_int(_t11)
        Int _t18 <- 0
        ret Int _t18

get_long (stack size: 16 bytes):
    0:
        _t0(Long) <- arg0
        _t1 <- str2
        printf(_t1, _t0)
        ret Long _t0
DOT file written to: get_int.dot
Rendered image: cfg.png
DOT file written to: get_bool.dot
Rendered image: cfg.png
DOT file written to: main.dot
Rendered image: cfg.png
DOT file written to: get_long.dot
Rendered image: cfg.png
Generated all_cfgs.html with CFG diagrams.

========== X86 Code ==========

